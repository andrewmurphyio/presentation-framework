# Implementation Plan

Generated by Ralph Wiggum planning loop - Iteration 2 (MVP-focused)

## Project Status

**Current State:** Greenfield project with complete specifications, zero implementation

**Specifications Analyzed:**
- ✅ slide-authoring.md
- ✅ talk-metadata.md
- ✅ design-system.md
- ✅ animations.md
- ✅ talk-variants.md
- ✅ theming.md
- ✅ media.md
- ✅ output-rendering.md

**Strategy:** Build incrementally with working vertical slices, not all features at once.

---

## Phase 1: MVP - Single Static Slide with Theme (Priority 1)

**Goal:** Render one HTML slide with a theme applied in a browser. Proves the core architecture works.

**Deliverable:** A static HTML page showing a title slide with themed colors/fonts.

### Infrastructure & Tooling

✅ **Initialize package.json**
- Define name: "presentation-framework", version: "0.1.0"
- Set type: "module" for ESM support
- Scripts: dev, build, test, lint, format
- **Write tests:** N/A (configuration file)

✅ **Install and configure TypeScript**
- Install typescript as devDependency
- Create tsconfig.json with strict mode, ESM output
- Configure paths: `@/*` → `src/*`
- Target: ES2020, module: ESNext
- **Write tests:** N/A (configuration file)

✅ **Install and configure Vitest**
- Install vitest, @vitest/ui, jsdom
- Create vitest.config.ts
- Configure test patterns: `**/*.{test,spec}.ts`
- Enable coverage reporting
- **Write tests:** N/A (configuration file)

✅ **Install and configure ESLint + Prettier**
- Install eslint, prettier, @typescript-eslint/*
- Create .eslintrc.json with strict rules
- Create .prettierrc (2 spaces, single quotes, trailing commas)
- Add lint/format scripts
- **Write tests:** N/A (configuration file)

✅ **Install and configure Vite**
- Install vite
- Create vite.config.ts for library mode
- Configure build output: dist/
- Set up dev server on port 5173
- **Write tests:** N/A (configuration file)

✅ **Create directory structure**
- src/lib/types/
- src/lib/design-system/
- src/lib/theming/
- tests/
- **Write tests:** N/A (setup task)

### Minimal Type Definitions

✅ **Define design token types (src/lib/types/tokens.ts)**
- ColorTokens interface
- TypographyTokens interface
- SpacingTokens interface
- DesignTokens interface (combines all token types)
- **Write tests:** Type compilation tests

✅ **Define theme types (src/lib/types/theme.ts)**
- Theme interface (implements DesignTokens)
- **Write tests:** Type compilation tests

✅ **Define layout types (src/lib/types/layout.ts)**
- LayoutZone interface
- LayoutDefinition interface
- For now: just support "title" layout
- **Write tests:** Type compilation tests

✅ **Define slide types (src/lib/types/slide.ts)**
- Slide interface (minimal: id, layout, content)
- SlideContent type (map of zone name → string content)
- **Write tests:** Type compilation tests

### Core: Design Token Registry

✅ **Implement TokenRegistry (src/lib/design-system/token-registry.ts)**
- Class to hold token definitions
- Methods: `registerTokens(tokens)`, `getTokens()`
- Store tokens in private Map
- **Write tests:**
  - Test token registration
  - Test token retrieval
  - Test overwriting tokens

✅ **Create default tokens (src/lib/design-system/default-tokens.ts)**
- Default color palette (8 colors minimum)
- Default typography (2 font families, 4 sizes)
- Default spacing scale (4px base: 4, 8, 16, 24, 32, 48)
- Export as `defaultTokens` object
- **Write tests:**
  - Test all token categories exist
  - Test token values are valid CSS

### Core: Theme System

✅ **Implement Theme class (src/lib/theming/theme.ts)**
- Constructor accepts DesignTokens
- Method: `getTokens()` returns tokens
- Method: `getCSSVariables()` returns CSS custom properties
- **Write tests:**
  - Test theme creation
  - Test token retrieval
  - Test CSS variable generation

✅ **Create example theme (src/lib/theming/example-theme.ts)**
- Create one example theme using default tokens
- Override 2-3 colors to demonstrate theming
- Export as `exampleTheme`
- **Write tests:**
  - Test theme has all required tokens
  - Test theme overrides work correctly

### Core: Layout System

✅ **Implement LayoutRegistry (src/lib/design-system/layout-registry.ts)**
- Class to register and retrieve layouts
- Methods: `registerLayout(name, definition)`, `getLayout(name)`
- Store layouts in Map
- **Write tests:**
  - Test layout registration
  - Test layout retrieval
  - Test error on unknown layout

✅ **Define "title" layout (src/lib/design-system/layouts/title.ts)**
- Zones: "title", "subtitle"
- CSS grid-based positioning
- Export layout definition
- Register in default registry
- **Write tests:**
  - Test layout has correct zones
  - Test layout can be retrieved

### Core: Slide Renderer

✅ **Implement SlideRenderer (src/lib/rendering/slide-renderer.ts)**
- Method: `render(slide, theme)` → HTML string
- Apply layout based on slide.layout
- Inject content into layout zones
- Inject theme CSS variables
- **Write tests:**
  - Test slide renders to HTML
  - Test theme CSS variables are applied
  - Test content appears in correct zones

### Demo Application

✅ **Create index.html (root)**
- Basic HTML5 structure
- Load main.ts as module
- Include div#app container
- **Write tests:** N/A (static HTML)

✅ **Create main.ts (src/main.ts)**
- Import SlideRenderer, exampleTheme, titleLayout
- Create a sample slide object
- Render slide to HTML
- Inject into DOM
- **Write tests:** Integration test for full rendering

✅ **Add basic styles (src/styles.css)**
- CSS reset
- Full-page slide display
- Apply theme CSS variables
- **Write tests:** N/A (visual verification)

### Validation

✅ **Manual verification**
- Run `npm run dev`
- Open http://localhost:5173
- Verify slide renders with themed colors/fonts
- **Write tests:** Visual inspection checklist
- **Status:** ✅ Dev server ran successfully at http://localhost:5173

**Phase 1 Status: ✅ Complete** - All tasks completed and verified.

---

## Phase 2: Multi-Slide Navigation (CURRENT)

**Goal:** Navigate between multiple slides using keyboard/clicker controls. Proves the presentation flow works.

**Deliverable:** A presentation with 3-5 slides that can be navigated with arrow keys and progress tracked.

### Type Definitions

✅ **Define Deck types (src/lib/types/deck.ts)**
- Deck interface (metadata, theme, slides array)
- DeckMetadata interface (title, author)
- Export from types/index.ts
- **Write tests:** Type validation via TypeScript build

### Core: Deck Management

✅ **Implement DeckNavigator (src/lib/navigation/deck-navigator.ts)**
- Track current slide index
- Methods: `next()`, `previous()`, `goToSlide(index)`, `getCurrentSlide()`
- Emit navigation events
- Handle boundary conditions (first/last slide)
- **Write tests:** 24 tests covering navigation, events, and boundaries

✅ **Implement NavigationController (src/lib/navigation/navigation-controller.ts)**
- Listen for keyboard events (Arrow keys, Space, Page Up/Down)
- Delegate to DeckNavigator
- Support clicker devices (standard presenter remotes map to arrow keys)
- Bonus: Home/End key support for jumping to first/last slide
- **Write tests:** 20 tests covering keyboard events, enable/disable, and presenter remote support

### Core: Deck Renderer

✅ **Implement DeckRenderer (src/lib/rendering/deck-renderer.ts)**
- Method: `render(deck)` → sets up presentation container
- Manages multiple slide instances
- Integrates with NavigationController
- Updates DOM on slide change
- Shows current slide, hides others
- **Write tests:** 20 tests covering rendering, navigation integration, layout, and lifecycle

### UI: Progress Indicator

✅ **Implement ProgressIndicator component (src/lib/ui/progress-indicator.ts)**
- Shows "Slide X of Y" or progress bar
- Updates on navigation events
- Configurable position and style
- Three display styles: text, bar, dots
- Six position options: top, bottom, top-left, top-right, bottom-left, bottom-right
- **Write tests:** 25 tests covering all styles, positions, navigation updates, and lifecycle

### Demo Application

✅ **Create multi-slide demo (src/main.ts)**
- Define a deck with 3-5 slides using different layouts
- Initialize DeckRenderer with deck
- Demonstrate navigation between slides
- Added ProgressIndicator to show slide counter
- Console logs navigation instructions
- **Write tests:** N/A (demo application)

✅ **Update index.html and styles**
- Full-screen slide container with absolute positioning
- Slide transition CSS with 0.3s fade effect
- Progress indicator styling with backdrop blur and semi-transparent background
- CSS custom properties integration for theming
- **Write tests:** N/A (presentational CSS/HTML)

### Validation

✅ **Manual verification**
- Arrow keys navigate forward/backward
- Space advances slides
- First/last slide boundaries work correctly
- Progress indicator updates
- All slides render with theme applied
- Dev server runs successfully at http://localhost:5173
- **Write tests:** N/A (manual verification)

**Phase 2 Status: ✅ Complete** - All tasks completed and verified. Dev server tested successfully.

---

## Phase 3: Core Layouts (CURRENT)

**Goal:** Add essential layout templates for common presentation patterns. Focuses on foundational layouts that cover 80% of use cases.

**Deliverable:** 4 core layouts that enable structured content presentations.

### Layout Implementations

- [x] **Define "section" layout (src/lib/design-system/layouts/section.ts)**
  - Section divider for talk structure
  - Zones: "heading" (large, centered)
  - Full-bleed background color support
  - Register in layout registry
  - **Write tests:** Layout structure, zone definitions, registration

- [x] **Define "content" layout (src/lib/design-system/layouts/content.ts)**
  - Single content area with title
  - Zones: "title", "content"
  - Balanced padding and spacing
  - Register in layout registry
  - **Write tests:** Layout structure, zone definitions, registration

- [x] **Define "two-column" layout (src/lib/design-system/layouts/two-column.ts)**
  - Equal-width two-column layout
  - Zones: "title", "left", "right"
  - CSS grid with 50/50 split
  - Register in layout registry
  - **Write tests:** Layout structure, zone definitions, registration

- [x] **Define "code" layout (src/lib/design-system/layouts/code.ts)**
  - Optimized for code display
  - Zones: "title", "code"
  - Larger code area with minimal chrome
  - Register in layout registry
  - **Write tests:** Layout structure, zone definitions, registration

### Demo & Validation

- [ ] **Update demo (src/main.ts)**
  - Create slides demonstrating all 5 layouts (title + 4 new)
  - Show content flowing into zones correctly
  - **Write tests:** N/A (demo application)

- [ ] **Manual verification**
  - All layouts render correctly
  - Content fits in zones as expected
  - Layouts respond to theme changes
  - **Write tests:** N/A (visual verification)

---

## Future Work

- Phase 4: Advanced Layouts - Add image layouts (left/right), asymmetric columns (40/60, 60/40), quote, comparison, full-bleed
- Phase 5: Components - Build reusable components (code blocks, lists, callouts, images)
- Phase 6: Slide Authoring Format - Define text-based format for writing slides (HTML/markdown variant)
- Phase 7: Build Animations - Implement fragment system and entry/exit animations
- Phase 8: Slide Transitions - Add transition effects between slides
- Phase 9: Media Support - Handle images, videos, and audio with lazy loading
- Phase 10: Presenter View - Dual-monitor support with speaker notes and timer
- Phase 11: Talk Variants - Conditional content system for audience-specific versions
- Phase 12: Talk Metadata - CFP-ready metadata structure with variant support
