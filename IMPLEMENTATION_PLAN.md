# Implementation Plan

Generated by Ralph Wiggum planning loop - Iteration 2 (MVP-focused)

## Project Status

**Current State:** Greenfield project with complete specifications, zero implementation

**Specifications Analyzed:**
- âœ… slide-authoring.md
- âœ… talk-metadata.md
- âœ… design-system.md
- âœ… animations.md
- âœ… talk-variants.md
- âœ… theming.md
- âœ… media.md
- âœ… output-rendering.md

**Strategy:** Build incrementally with working vertical slices, not all features at once.

---

## Phase 1: MVP - Single Static Slide with Theme (Priority 1)

**Goal:** Render one HTML slide with a theme applied in a browser. Proves the core architecture works.

**Deliverable:** A static HTML page showing a title slide with themed colors/fonts.

### Infrastructure & Tooling

âœ… **Initialize package.json**
- Define name: "presentation-framework", version: "0.1.0"
- Set type: "module" for ESM support
- Scripts: dev, build, test, lint, format
- **Write tests:** N/A (configuration file)

âœ… **Install and configure TypeScript**
- Install typescript as devDependency
- Create tsconfig.json with strict mode, ESM output
- Configure paths: `@/*` â†’ `src/*`
- Target: ES2020, module: ESNext
- **Write tests:** N/A (configuration file)

âœ… **Install and configure Vitest**
- Install vitest, @vitest/ui, jsdom
- Create vitest.config.ts
- Configure test patterns: `**/*.{test,spec}.ts`
- Enable coverage reporting
- **Write tests:** N/A (configuration file)

âœ… **Install and configure ESLint + Prettier**
- Install eslint, prettier, @typescript-eslint/*
- Create .eslintrc.json with strict rules
- Create .prettierrc (2 spaces, single quotes, trailing commas)
- Add lint/format scripts
- **Write tests:** N/A (configuration file)

âœ… **Install and configure Vite**
- Install vite
- Create vite.config.ts for library mode
- Configure build output: dist/
- Set up dev server on port 5173
- **Write tests:** N/A (configuration file)

âœ… **Create directory structure**
- src/lib/types/
- src/lib/design-system/
- src/lib/theming/
- tests/
- **Write tests:** N/A (setup task)

### Minimal Type Definitions

âœ… **Define design token types (src/lib/types/tokens.ts)**
- ColorTokens interface
- TypographyTokens interface
- SpacingTokens interface
- DesignTokens interface (combines all token types)
- **Write tests:** Type compilation tests

âœ… **Define theme types (src/lib/types/theme.ts)**
- Theme interface (implements DesignTokens)
- **Write tests:** Type compilation tests

âœ… **Define layout types (src/lib/types/layout.ts)**
- LayoutZone interface
- LayoutDefinition interface
- For now: just support "title" layout
- **Write tests:** Type compilation tests

âœ… **Define slide types (src/lib/types/slide.ts)**
- Slide interface (minimal: id, layout, content)
- SlideContent type (map of zone name â†’ string content)
- **Write tests:** Type compilation tests

### Core: Design Token Registry

ğŸ”´ **Implement TokenRegistry (src/lib/design-system/token-registry.ts)**
- Class to hold token definitions
- Methods: `registerTokens(tokens)`, `getTokens()`
- Store tokens in private Map
- **Write tests:**
  - Test token registration
  - Test token retrieval
  - Test overwriting tokens

ğŸ”´ **Create default tokens (src/lib/design-system/default-tokens.ts)**
- Default color palette (8 colors minimum)
- Default typography (2 font families, 4 sizes)
- Default spacing scale (4px base: 4, 8, 16, 24, 32, 48)
- Export as `defaultTokens` object
- **Write tests:**
  - Test all token categories exist
  - Test token values are valid CSS

### Core: Theme System

ğŸ”´ **Implement Theme class (src/lib/theming/theme.ts)**
- Constructor accepts DesignTokens
- Method: `getTokens()` returns tokens
- Method: `getCSSVariables()` returns CSS custom properties
- **Write tests:**
  - Test theme creation
  - Test token retrieval
  - Test CSS variable generation

ğŸ”´ **Create example theme (src/lib/theming/example-theme.ts)**
- Create one example theme using default tokens
- Override 2-3 colors to demonstrate theming
- Export as `exampleTheme`
- **Write tests:**
  - Test theme has all required tokens
  - Test theme overrides work correctly

### Core: Layout System

ğŸ”´ **Implement LayoutRegistry (src/lib/design-system/layout-registry.ts)**
- Class to register and retrieve layouts
- Methods: `registerLayout(name, definition)`, `getLayout(name)`
- Store layouts in Map
- **Write tests:**
  - Test layout registration
  - Test layout retrieval
  - Test error on unknown layout

ğŸ”´ **Define "title" layout (src/lib/design-system/layouts/title.ts)**
- Zones: "title", "subtitle"
- CSS grid-based positioning
- Export layout definition
- Register in default registry
- **Write tests:**
  - Test layout has correct zones
  - Test layout can be retrieved

### Core: Slide Renderer

ğŸ”´ **Implement SlideRenderer (src/lib/rendering/slide-renderer.ts)**
- Method: `render(slide, theme)` â†’ HTML string
- Apply layout based on slide.layout
- Inject content into layout zones
- Inject theme CSS variables
- **Write tests:**
  - Test slide renders to HTML
  - Test theme CSS variables are applied
  - Test content appears in correct zones

### Demo Application

ğŸ”´ **Create index.html (root)**
- Basic HTML5 structure
- Load main.ts as module
- Include div#app container
- **Write tests:** N/A (static HTML)

ğŸ”´ **Create main.ts (src/main.ts)**
- Import SlideRenderer, exampleTheme, titleLayout
- Create a sample slide object
- Render slide to HTML
- Inject into DOM
- **Write tests:** Integration test for full rendering

ğŸ”´ **Add basic styles (src/styles.css)**
- CSS reset
- Full-page slide display
- Apply theme CSS variables
- **Write tests:** N/A (visual verification)

### Validation

ğŸ”´ **Manual verification**
- Run `npm run dev`
- Open http://localhost:5173
- Verify slide renders with themed colors/fonts
- **Write tests:** Visual inspection checklist

---

## Phase 2: Multiple Layouts & Components (Priority 2)

**Goal:** Support 3-4 layouts and basic components (headings, paragraphs, lists)

**Not started yet - planned after Phase 1 complete**

### Tasks (summary):
- Define component types
- Implement ComponentRegistry
- Create 3-4 standard components (heading, paragraph, list, code)
- Add 2-3 more layouts (single-content, two-column-equal, code)
- Update renderer to handle components
- Create example with multiple slides using different layouts

---

## Phase 3: Navigation & Presentation Runtime (Priority 3)

**Goal:** Navigate between multiple slides with keyboard controls

**Not started yet - planned after Phase 2 complete**

### Tasks (summary):
- Implement NavigationController
- Implement PresentationState manager
- Add keyboard event handling
- Add slide transitions (fade)
- Create multi-slide demo

---

## Phase 4: Fragments & Animations (Priority 4)

**Goal:** Support build animations and fragment reveals

**Not started yet - planned after Phase 3 complete**

### Tasks (summary):
- Define missing spec: specs/fragment-timing.md
- Implement AnimationRegistry
- Define standard animation presets
- Implement FragmentBuilder
- Implement AnimationEngine runtime
- Create demo with animated slide

---

## Phase 5: Presenter View (Priority 5)

**Goal:** Dual-window presenter view with speaker notes

**Not started yet - planned after Phase 4 complete**

### Tasks (summary):
- Define missing spec: specs/presenter-protocol.md
- Implement PresenterView class
- Window communication (BroadcastChannel)
- Display speaker notes
- Display next slide preview
- Add timer/clock

---

## Phase 6: Variants & Metadata (Priority 6)

**Goal:** Support audience-specific variants and CFP metadata export

**Not started yet - planned after Phase 5 complete**

### Tasks (summary):
- Implement VariantEvaluator
- Implement MetadataResolver
- Create metadata export formats
- Demo with technical vs executive variants

---

## Phase 7: Media & Lazy Loading (Priority 7)

**Goal:** Support images, video, audio with lazy loading

**Not started yet - planned after Phase 6 complete**

### Tasks (summary):
- Define missing spec: specs/media-controls.md
- Implement MediaResolver
- Implement LazyLoader
- Image optimization pipeline
- Demo with media-heavy slides

---

## Phase 8: Build System & Authoring Format (Priority 8)

**Goal:** Parse source files and build complete presentations

**Not started yet - planned after Phase 7 complete**

### Tasks (summary):
- Define missing spec: specs/source-format.md
- Implement slide parser
- Implement TalkBuilder
- Development server with live reload
- Example talks in source format

---

## Phase 9: Polish & Examples (Priority 9)

**Goal:** Production-ready library with comprehensive examples

**Not started yet - planned after Phase 8 complete**

### Tasks (summary):
- Create 3 example talks
- Create 3 example themes
- Fullscreen support
- Overview/grid view
- Progress indicator
- URL navigation
- Documentation

---

## Missing Specifications Identified

These specs will be written when we reach the corresponding phase:

1. ğŸ“ **specs/source-format.md** - Slide authoring format (Phase 8)
2. ğŸ“ **specs/fragment-timing.md** - Fragment timing controls (Phase 4)
3. ğŸ“ **specs/media-controls.md** - Media playback behavior (Phase 7)
4. ğŸ“ **specs/presenter-protocol.md** - Window communication protocol (Phase 5)

---

## Summary

**Current Focus:** Phase 1 MVP only
**Phase 1 Tasks:** ~15 tasks (vs 47 in original plan)
**Phase 1 Goal:** Single themed slide rendering in browser

**Next Steps:**
1. Complete Phase 1 (estimated 3-5 Ralph iterations)
2. Validate MVP works visually
3. Move to Phase 2

**Philosophy:** Ship small, iterate fast, validate continuously.

Each phase builds on the previous one and delivers a working, testable increment.
